---
layout: post
title: Improvements
tags: lint pep8 performance testing gsoc
category: 'GSoC-2013'
Year: 2013
Month: 09
Date: 09
---

<h2>Commits</h2>
<p>
	<ul>
<li>Performance Tests for changing composite mode: <a href="https://github.com/hyades/gst-switch/commit/f51bed9981b0a527ee15cb3cd597c58fe4063a15">f51bed9981b0a527ee15cb3cd597c58fe4063a15</a></li>
<li>removed html output pylintrc files: <a href="https://github.com/hyades/gst-switch/commit/8ffb62ad58a40c3052c2e539b0ae91b7ce0c838b">8ffb62ad58a40c3052c2e539b0ae91b7ce0c838b</a></li>
<li>performance tests for get_preview_ports: <a href="https://github.com/hyades/gst-switch/commit/9038c5d0b26682526c93a5877a1e691530a49311">9038c5d0b26682526c93a5877a1e691530a49311</a></li>
<li>Performance Tests: <a href="https://github.com/hyades/gst-switch/commit/d48a3f6e70ca26d937db284cdb2313e4b0ec951a">d48a3f6e70ca26d937db284cdb2313e4b0ec951a</a></li>
<li>Changed hooks: <a href="https://github.com/hyades/gst-switch/commit/342e7d486039d22d6ee08c4bbd847d5aa30ae64a">342e7d486039d22d6ee08c4bbd847d5aa30ae64a</a></li>
<li>Changed hooks: <a href="https://github.com/hyades/gst-switch/commit/ab8d1f8888a1fbc3763974fb9947fb3bfa35008a">ab8d1f8888a1fbc3763974fb9947fb3bfa35008a</a></li>
<li>Added performance tests: <a href="https://github.com/hyades/gst-switch/commit/b8ab13270cbabc00962675b0409beaa664fece13">b8ab13270cbabc00962675b0409beaa664fece13</a></li>
<li>Added performance tests: <a href="https://github.com/hyades/gst-switch/commit/5581fc9d4fa6196f6b6de7a91617791d2dfabc14">5581fc9d4fa6196f6b6de7a91617791d2dfabc14</a></li>
<li>modified Makefile: <a href="https://github.com/hyades/gst-switch/commit/ef31078ac60d820ce78d50ffba295bd8a044e48a">ef31078ac60d820ce78d50ffba295bd8a044e48a</a></li>
<li>modified Makefile: <a href="https://github.com/hyades/gst-switch/commit/c0a837193bd702dc8da2f7f7a07379ae8e5c1122">c0a837193bd702dc8da2f7f7a07379ae8e5c1122</a></li>
<li>updated Makefile: <a href="https://github.com/hyades/gst-switch/commit/14f155b3778f68bc6011a460af31510d85740aa9">14f155b3778f68bc6011a460af31510d85740aa9</a></li>
<li>Added hooks for pep8 and lint checks: <a href="https://github.com/hyades/gst-switch/commit/cd2f41a5c278935691783ead3d1668cbfb51039c">cd2f41a5c278935691783ead3d1668cbfb51039c</a></li>
<li>testing hooks: <a href="https://github.com/hyades/gst-switch/commit/ddd62bd51dd13b65074fc2a93fb6e09e3145bcfb">ddd62bd51dd13b65074fc2a93fb6e09e3145bcfb</a></li>
<li>modified rst format sphinx: <a href="https://github.com/hyades/gst-switch/commit/38bf39aa56954bad932682ed67087684b300c282">38bf39aa56954bad932682ed67087684b300c282</a></li>
<li>updated sphinx docs: <a href="https://github.com/hyades/gst-switch/commit/23dd1f754afa19996c0a3e12d4e443e75368648e">23dd1f754afa19996c0a3e12d4e443e75368648e</a></li>
<li>pep8 checks along with py.test: <a href="https://github.com/hyades/gst-switch/commit/251557f4ea773ba51b60bcb64da587602338cb72">251557f4ea773ba51b60bcb64da587602338cb72</a></li>
<li>pep8: <a href="https://github.com/hyades/gst-switch/commit/d368e28e32abae48fddfd1a1d0318c603362f518">d368e28e32abae48fddfd1a1d0318c603362f518</a></li>
<li>pep8 clean code unittests: <a href="https://github.com/hyades/gst-switch/commit/164789db58b29c02da159152d92097b9cece956b">164789db58b29c02da159152d92097b9cece956b</a></li>
<li>Add pylint to dependencies: <a href="https://github.com/hyades/gst-switch/commit/16541955ee819c5e787070b9a8257edd92a68f54">16541955ee819c5e787070b9a8257edd92a68f54</a></li>
<li>updated gitignore: <a href="https://github.com/hyades/gst-switch/commit/06647c8788bbcd62498dea7467f52f1dbcb8b278">06647c8788bbcd62498dea7467f52f1dbcb8b278</a></li>
<li>updated gitignore: <a href="https://github.com/hyades/gst-switch/commit/0c4e1bd5e4cdad01c5efae7c310ccf62f186afa6">0c4e1bd5e4cdad01c5efae7c310ccf62f186afa6</a></li>
<li>pep8 gstswitch code: <a href="https://github.com/hyades/gst-switch/commit/612a2ad6252de514fef9753530ef79f0dbaef4e2">612a2ad6252de514fef9753530ef79f0dbaef4e2</a></li>
<li>Makefile: added lint to tests: <a href="https://github.com/hyades/gst-switch/commit/5e76be08ead847eafcf8aa29f494f2c410c0e5c8">5e76be08ead847eafcf8aa29f494f2c410c0e5c8</a></li>
<li>Raising error if lint fails: <a href="https://github.com/hyades/gst-switch/commit/7582acb5e7c6be3b5a7db834b4efca5f43b47181">7582acb5e7c6be3b5a7db834b4efca5f43b47181</a></li>
<li>lint and docs for test_server.py: <a href="https://github.com/hyades/gst-switch/commit/c1dcec794d3265993f16977b0e7f1a38690d4a56">c1dcec794d3265993f16977b0e7f1a38690d4a56</a></li>
<li>linting and docs test_helper.py: <a href="https://github.com/hyades/gst-switch/commit/1b0cf382d1913aee0d65ba5e9caa1a373fe3d270">1b0cf382d1913aee0d65ba5e9caa1a373fe3d270</a></li>
<li>updated .gitignore: <a href="https://github.com/hyades/gst-switch/commit/68e0553483fbb34c60bfc3811c09934245a425c1">68e0553483fbb34c60bfc3811c09934245a425c1</a></li>
<li>removing gcov files before test: <a href="https://github.com/hyades/gst-switch/commit/b73945f8882bb08b9ae3655b57f1e31dffcccf48">b73945f8882bb08b9ae3655b57f1e31dffcccf48</a></li>
<li>removing gcov files before test: <a href="https://github.com/hyades/gst-switch/commit/9ee5db3159d4af5b00c26df0dd009eec5eccd329">9ee5db3159d4af5b00c26df0dd009eec5eccd329</a></li>
<li>removing gcov files before test: <a href="https://github.com/hyades/gst-switch/commit/c6b9d492b4433db7da9e92d606d4257dfa621b52">c6b9d492b4433db7da9e92d606d4257dfa621b52</a></li>
</ul>
Others couldn't come here because of Github API :)
</p>


<h2>
	Things done in past few days:
</h2>


<p>
	<ul>

		<li>
			Integration tests for <code>mark_tracking</code>
		</li>
		<li>
			<b>Sphinx Docs:</b> A lot of modules had errors. The most common problem is <code>ImportError</code> because sphinx is unable to find the modules in PYTHONPATH. Thus, these modules need to be mocked. I have a directory <a href="https://github.com/hyades/gst-switch/tree/master/docs/fake-lib">fake-lib</a> which has all these mocked modules. This fake-lib has to be added to the PYTHONPATH in the <a href="https://github.com/hyades/gst-switch/blob/master/docs/conf.py">conf.py</a> file. The docs are at <a href="http://gst-switch.readthedocs.org/en/latest/">http://gst-switch.readthedocs.org/en/latest/</a>
		</li>
		<li>
			<b>Imgur Frame Upload:</b> For testing in travis, I am uploading the key frames that are generated to imgur. For example in <a href="https://api.travis-ci.org/jobs/11142262/log.txt?deansi=true">this</a> build the output key frames are: <a href="http://i.imgur.com/GBZMLZ0.png">img1</a>(before PIP change) and <a href="http://i.imgur.com/Beoj5Lo.png">img2</a>(after PIP change). 
			So there are two main problems with the build process - 
			<ol>
				<li>An unknown dependency</li>
				<li>Gstreamer's python binding dont produce a <code>videotestsrc</code> output. Maybe a problem with the typelibs.</li>
			</ol>
		</li>
		<li><b>Modified the controller tests: </b> The controller tests were too heavy causing them to be unreliable at times. Now they are perfectly reliable.</li>
		<li><b>Docs: </b> Added docs for all modules and classes.</li>
		<li><b>Linting:</b> All code is pylint clean. The corrosponding pylintrc files are present. These files contain the excluded warnings and errors. Can be done by <code>make lint</code></li>
		<li><b>pep8:</b> All code is pep8 clean. Can be done by <code>make pep8</code></li>
		<li><b>pre-commit hooks:</b> Added pre-commit hooks which will run lint on C code and pylint and pep8 on python code. It will not commit unless these tests pass.</li>
		<li><b>Build failures:</b> If any of the tests (lint, pep8, unittests) fail, the build fails and the repository is flagged red.</li>
		<li><b>Performance Tests: </b> These are extreme torture tests. I run it on my system alone and not on travis. All of these tests are not meant to pass, some failures are expected. Currently the tests include things test cases where I call the <code>get_compose_port</code> method <i>N</i> number of times, where i vary <i>N</i> in [100, 200, 300, 400, 500]. The test mostly fails at the 500 mark. One test case tests changing the PIP mode after some delay. I vary this delay like [1, 0.6, 0.5, 0.2] in seconds. On my system, below 0.6, i.e for test cases 0.5 and 0.2 the test fails.</li>

	</ul>
</p>




<div class="row">	
	<div class="span9 column">
			<p class="pull-right">{% if page.previous.url %} <a href="{{page.previous.url}}" title="Previous Post: {{page.previous.title}}"><i class="icon-chevron-left"></i></a> 	{% endif %}   {% if page.next.url %} 	<a href="{{page.next.url}}" title="Next Post: {{page.next.title}}"><i class="icon-chevron-right"></i></a> 	{% endif %} </p>  
	</div>

</div>

<div class="row">	
    <div class="span9 columns">    
		<h2>Comments Section</h2>
	    <p>Feel free to comment on the post but keep it clean and on topic.</p>	
		<div id="disqus_thread"></div>
		<script type="text/javascript">
			/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
			var disqus_shortname = 'aayushahuja'; // required: replace example with your forum shortname
			
			
			/* * * DON'T EDIT BELOW THIS LINE * * */
			(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
	</div>
</div>

<!-- Twitter -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

<!-- Google + -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<!-- Written by hyades -->

